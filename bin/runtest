#!/bin/bash

make clean
make
make test

for file in $(find ./test -maxdepth 1 -name '*.ml' -type f); do
  printf "\n\e[33m[TEST] ${file}\e[m\n"
  printf "\e[34m[COMPILER]\e[m\n"
  ./${file%.ml}
  printf "\n\e[34m[INTERPRETER]\e[m\n"
  ./min-camli "${file}"
  echo ""
done
