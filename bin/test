#!/bin/bash

printf "[\e[33mmin-caml\e[m] make\n"
make &>/dev/null
printf "[\e[33mmin-caml\e[m] make test\n"
make test &>/dev/null

for file in $(find ./test -maxdepth 1 -name '*.ml' -type f); do
  printf "\n\e[33m[TEST] %s\e[m\n" "${file}"
  printf "\e[34m[COMPILER]\e[m\n"
  "${file%.ml}"
  printf "\n\e[34m[INTERPRETER]\e[m\n"
  ./min-camli "${file%.ml}"
  echo ""
done
