#!/bin/bash

usage () {
  echo "Usage: $0 [-d] ..." 1>&2
  exit 0
}

[ ! -f ./min-caml ] && make -s

for opt in "$@"
do
  case "$opt" in
    '-d' | '-debug' )
      if [ -z "$2" ]; then
        exit 0
      else
        ./min-caml -interp -debug "$2"
      fi
      ;;
    '-h' )
      usage
      ;;
    * )
      ./min-caml -interp "$1"
      ;;
  esac
  shift
done
